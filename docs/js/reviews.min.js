"use strict";!function(){function t(){c()}function n(){o()}function e(t){t.keyCode===window.constants.ESC_KEYCODE&&o()}function o(){window.constants.MODAL.classList.remove("modal--active"),window.constants.MODAL_ALERT_SUCCESS.classList.contains("modal__alert--active")&&window.constants.MODAL_ALERT_SUCCESS.classList.remove("modal__alert--active"),window.constants.MODAL_CLOSE_BUTTON.removeEventListener("click",n),window.removeEventListener("keydown",e),window.constants.MODAL_FORM.removeEventListener("submit",s)}function s(t){t.preventDefault();var n={};n.author=window.constants.MODAL_FORM_AUTHOR.value,n.text=window.constants.MODAL_FORM_TEXT.value,window.data.unshift(n),a(),i(),window.constants.MODAL_ALERT_SUCCESS.classList.add("modal__alert--active"),window.constants.MODAL_FORM.reset()}function a(){window.constants.REVIEWS_CONTAINER.innerHTML="",window.constants.MORE_REVIEWS_BUTTON.dataset.count="0",c()}function i(){window.constants.MORE_REVIEWS_BUTTON.classList.contains("button--unactive")?(window.constants.MORE_REVIEWS_BUTTON.classList.remove("button--unactive"),window.constants.MORE_REVIEWS_BUTTON.textContent="Показать еще",window.constants.MORE_REVIEWS_BUTTON.addEventListener("click",t)):(window.constants.MORE_REVIEWS_BUTTON.classList.add("button--unactive"),window.constants.MORE_REVIEWS_BUTTON.textContent="Конец списка",window.constants.MORE_REVIEWS_BUTTON.removeEventListener("click",t))}function c(){for(var t=Number(window.constants.MORE_REVIEWS_BUTTON.dataset.count),n=document.createDocumentFragment(),e=t;e<t+window.constants.REVIEWS_LOAD_STEP;e++){if(!window.data[e]){i();break}var o=document.createElement("blockquote"),s=document.createElement("p"),a=document.createElement("cite");o.classList.add("reviews__quote"),s.classList.add("reviews__quote-text"),a.classList.add("reviews__quote-author"),a.textContent=window.data[e].author,s.textContent=window.data[e].text,o.appendChild(s),o.appendChild(a),n.appendChild(o)}window.constants.REVIEWS_CONTAINER.appendChild(n),window.constants.MORE_REVIEWS_BUTTON.dataset.count=e}a(),window.constants.MORE_REVIEWS_BUTTON.addEventListener("click",t),window.constants.WRITE_REVIEW_BUTTON.addEventListener("click",function(){window.constants.MODAL.classList.add("modal--active"),window.constants.MODAL_CLOSE_BUTTON.addEventListener("click",n),window.addEventListener("keydown",e),window.constants.MODAL_FORM.addEventListener("submit",s)})}();