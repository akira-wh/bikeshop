"use strict";!function(){function t(){i()}function n(){o()}function e(t){t.keyCode===window.constants.ESC_KEYCODE&&o()}function o(){window.constants.MODAL.classList.remove("modal--active"),window.constants.MODAL_ALERT_SUCCESS.classList.contains("modal__alert--active")&&window.constants.MODAL_ALERT_SUCCESS.classList.remove("modal__alert--active"),window.constants.MODAL_CLOSE_BUTTON.removeEventListener("click",n),window.removeEventListener("keydown",e),window.constants.MODAL_FORM.removeEventListener("submit",s)}function s(t){t.preventDefault();var n={};n.author=window.constants.MODAL_FORM_AUTHOR.value,n.text=window.constants.MODAL_FORM_TEXT.value,window.data.unshift(n),a(),window.constants.MODAL_ALERT_SUCCESS.classList.add("modal__alert--active"),window.constants.MODAL_FORM.reset()}function a(){window.constants.REVIEWS_CONTAINER.innerHTML="",window.constants.MORE_REVIEWS_BUTTON.dataset.count="0",i()}function i(){for(var n=Number(window.constants.MORE_REVIEWS_BUTTON.dataset.count),e=document.createDocumentFragment(),o=n;o<n+window.constants.REVIEWS_LOAD_STEP;o++){if(!window.data[o]){window.constants.MORE_REVIEWS_BUTTON.classList.add("button--unactive"),window.constants.MORE_REVIEWS_BUTTON.textContent="Конец списка",window.constants.MORE_REVIEWS_BUTTON.removeEventListener("click",t);break}var s=document.createElement("blockquote"),a=document.createElement("p"),i=document.createElement("cite");s.classList.add("reviews__quote"),a.classList.add("reviews__quote-text"),i.classList.add("reviews__quote-author"),i.textContent=window.data[o].author,a.textContent=window.data[o].text,s.appendChild(a),s.appendChild(i),e.appendChild(s)}window.constants.REVIEWS_CONTAINER.appendChild(e),window.constants.MORE_REVIEWS_BUTTON.dataset.count=o}a(),window.constants.MORE_REVIEWS_BUTTON.addEventListener("click",t),window.constants.WRITE_REVIEW_BUTTON.addEventListener("click",function(){window.constants.MODAL.classList.add("modal--active"),window.constants.MODAL_CLOSE_BUTTON.addEventListener("click",n),window.addEventListener("keydown",e),window.constants.MODAL_FORM.addEventListener("submit",s)})}();